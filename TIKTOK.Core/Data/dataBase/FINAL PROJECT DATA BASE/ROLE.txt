Create Table Role(
 ID NUMBER GENERATED BY DEFAULT AS IDENTITY CONSTRAINT PK_Role PRIMARY Key,
 name Varchar2(255)
);

CREATE OR REPLACE PACKAGE  Role_PACKAGE AS

    PROCEDURE Role_CRUD(P_ACTION in varchar DEFAULT NULL 
    ,P_ID IN NUMBER DEFAULT NULL
    ,P_NAME IN VARCHAR DEFAULT NULL);
    
End Role_PACKAGE;



CREATE OR REPLACE PACKAGE BODY Role_PACKAGE AS
    
    PROCEDURE Role_CRUD(P_ACTION in varchar DEFAULT NULL 
    ,P_ID IN NUMBER DEFAULT NULL
    ,P_NAME IN VARCHAR DEFAULT NULL)
    IS
        Role_all SYS_REFCURSOR;
    BEGIN
        IF P_ACTION = 'INSERT' THEN
            INSERT INTO Role VALUES(DEFAULT,P_NAME); 
            COMMIT;
        ELSIF P_ACTION = 'UPDATE' THEN

            UPDATE Role SET
                NAME = P_NAME 
            WHERE ID = P_ID;
            COMMIT;

        ELSIF P_ACTION = 'DELETE' THEN
            DELETE Role WHERE ID = P_ID;
            COMMIT;

        ELSIF P_ACTION = 'GETALL' THEN
            OPEN Role_all FOR SELECT * FROM Role;
            dbms_sql.return_result(Role_all);

        ELSIF P_ACTION = 'GETBYID' THEN
            OPEN Role_all FOR SELECT * FROM Role WHERE ID = P_ID;
            dbms_sql.return_result(Role_all);
        ELSIF P_ACTION = 'GETBYNAME' THEN
            OPEN Role_all FOR SELECT * FROM Role WHERE NAME = P_NAME;
            dbms_sql.return_result(Role_all);   
        END IF;
    END Role_CRUD;

END Role_PACKAGE;